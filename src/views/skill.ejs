<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/skill.css">
    <title>Skill Details - SW_2425</title>
</head>
<body>
    <div class="container">
        <h1>Skill: <%= skill.name %></h1>
        <div class="badge">
            <svg width="100" height="100" viewBox="0 0 100 100">
                <polygon points="50,0 100,25 100,75 50,100 0,75 0,25" fill="white" stroke="black" stroke-width="1" />
                <text x="50%" y="35%" text-anchor="middle" fill="black" font-size="9">
                    <% 
                    const words = skill.name.split(' ');
                    let line = '';
                    let lines = [];
                    
                    words.forEach(word => {
                        if ((line + ' ' + word).trim().length <= 20) {
                            line += (line ? ' ' : '') + word;
                        } else {
                            lines.push(line);
                            line = word;
                        }
                    });
                    if (line) lines.push(line);

                    lines.forEach((line, index) => { 
                    %>
                        <tspan x="50%" dy="<%= index === 0 ? '0' : '1.2em' %>"><%= line %></tspan>
                    <% }) %>
                </text>
                <image x="35%" y="60%" width="30" height="30" href="<%= skill.icon %>" />
            </svg>
        </div>
        <h2>Skill Score: <%= skill.score %> point<%= (skill.score > 1 || skill.score === 0) ? 's' : ''%></h2>
        <h2>Description</h2>
        <p><%= skill.description %></p>
        <h2>Tasks to Complete</h2>
        <% if (skill.tasks.length === 0) { %>
            <p>No tasks to complete.</p>
        <% } else { %>
            <ul>
                <% skill.tasks.forEach(task => { %>
                    <li>
                        <input type="checkbox" id="<%= task %>" name="tasks" value="<%= task %>">
                        <label for="<%= task %>"><%= task %></label>
                    </li>
                <% }); %>
            </ul>
        <% } %>
        <h2>Resources</h2>
        <% if (skill.resources.length === 0) { %>
            <p>No resources available.</p>
        <% } else { %>
            <ul>
                <% skill.resources.forEach(resource => { %>
                    <li><%= resource %></a></li>
                <% }); %>
            </ul>
        <% } %>
    </div>
</body>
</html>